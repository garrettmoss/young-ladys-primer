@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    text-rendering: optimizeLegibility;
  }

  html {
    font-family: Baskerville, 'Palatino Linotype', Palatino, 'Century Schoolbook', serif;
  }

  body {
    margin: 0;
    min-height: 100vh;
    background: linear-gradient(180deg, #f9f6f0 0%, #f5f1e6 50%, #ede8db 100%);
    background-attachment: fixed;
    transition: background 0.3s ease;
  }

  #root {
    width: 100%;
    min-height: 100vh;
  }
}

@layer components {
  /* Main container */
  .primer-container {
    min-height: 100vh;
    position: relative;
  }
  
  .primer-container::before {
    content: '';
    position: absolute;
    inset: 0;
    opacity: 0.2;
    background-image: repeating-linear-gradient(
      90deg,
      transparent,
      transparent 2px,
      rgba(139, 115, 85, 0.05) 2px,
      rgba(139, 115, 85, 0.05) 4px
    );
    mix-blend-mode: multiply;
    pointer-events: none;
  }
  
  /* Content wrapper */
  .primer-content {
    @apply max-w-4xl mx-auto relative z-10 p-4;
  }
  
  /* Header section */
  .primer-header {
    @apply text-center mb-8 pt-8;
  }
  
  .decorative-line {
    @apply h-px bg-gradient-to-r from-transparent via-amber-700 to-transparent w-32;
  }
  
  .header-icon-container {
    @apply mx-4 relative;
  }
  
  .sparkle-animation {
    @apply absolute inset-0 animate-pulse z-20;
    filter: drop-shadow(0 0 3px rgba(250, 204, 21, 0.5));
  }
  
  .book-icon {
    @apply w-12 h-12 text-amber-700 relative z-10;
  }
  
  .main-title {
    @apply mb-3 relative;
  }
  
  .title-line-1 {
    @apply text-5xl font-serif text-amber-800;
    font-family: Baskerville, 'Palatino Linotype', Palatino, 'Century Schoolbook', serif;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    letter-spacing: 0.05em;
  }
  
  .title-line-2 {
    @apply text-6xl font-serif text-amber-900;
    font-family: Baskerville, 'Palatino Linotype', Palatino, 'Century Schoolbook', serif;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    letter-spacing: 0.1em;
    font-weight: bold;
  }
  
  .subtitle {
    @apply text-amber-700/80 text-lg italic mt-4;
    font-family: Baskerville, 'Palatino Linotype', serif;
    letter-spacing: 0.02em;
  }
  
  .decorative-flourish {
    @apply flex items-center justify-center mt-4;
  }
  
  .flourish-symbol {
    @apply text-amber-600/60 text-2xl;
  }
  
  /* Ornate manuscript page styling */
  .manuscript-page {
    @apply bg-gradient-to-br from-amber-50 via-yellow-50/95 to-amber-50/90 rounded-lg shadow-xl border border-amber-600/20 relative overflow-hidden;
    background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' /%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.02'/%3E%3C/svg%3E");
    box-shadow: inset 0 0 20px rgba(217, 119, 6, 0.05), 0 10px 40px rgba(0,0,0,0.1);
  }
  
  /* Typography styles */
  .illuminated-letter {
    @apply text-6xl text-amber-800 align-top font-bold inline-block mr-0.5;
    font-family: Baskerville, serif;
    text-shadow: 2px 2px 3px rgba(0,0,0,0.1);
    line-height: 0.7;
    vertical-align: bottom;
  }
  
  .primer-title {
    font-family: Baskerville, 'Palatino Linotype', Palatino, 'Century Schoolbook', serif;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    letter-spacing: 0.05em;
  }
  
  .story-text {
    @apply text-amber-900/90 leading-loose text-lg;
    font-family: Baskerville, 'Book Antiqua', 'Palatino Linotype', serif;
    text-align: justify;
    letter-spacing: 0.01em;
    line-height: 1.8;
    font-weight: 400;
  }

  /* Technical/debug content display - can be used anywhere */
  .technical-text {
    font-family: 'Monaco', 'Courier New', monospace;
    white-space: pre-wrap;
    word-break: break-word;
    overflow-wrap: break-word;
    text-align: left;
    text-indent: 0;
  }

  /* For long unbroken strings (URLs, keys, etc) */
  .break-long-words {
    word-break: break-all;
    overflow-wrap: anywhere;
  }

  /* Debug panel item styling */
  .debug-item {
    margin-bottom: 1rem;
    padding: 0.75rem;
    border-left: 3px solid #d97706;
    background: rgba(217, 119, 6, 0.05);
    border-radius: 0.25rem;
  }

  .debug-key {
    font-weight: 600;
    color: #92400e;
    margin-bottom: 0.5rem;
    font-size: 0.9em;
    word-break: break-word;
  }

  .debug-value-wrapper {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
  }

  .debug-collapse-icon {
    flex-shrink: 0;
    margin-top: 0.5rem;
    font-size: 0.8em;
    color: #92400e;
    cursor: pointer;
    padding: 0.15rem 0.25rem;
    border-radius: 0.25rem;
    transition: background 0.2s;
    user-select: none;
  }

  .debug-collapse-icon:hover {
    background: rgba(217, 119, 6, 0.15);
  }

  .debug-value {
    font-family: 'Monaco', 'Courier New', monospace;
    font-size: 0.85em;
    padding: 0.5rem;
    background: rgba(0, 0, 0, 0.05);
    border-radius: 0.25rem;
    max-height: 200px;
    overflow-y: auto;
    white-space: pre-wrap;
    word-break: break-word;
    color: #451a03;
  }

  .debug-meta {
    font-size: 0.85em;
    color: #92400e;
    font-style: italic;
    margin-top: 0.25rem;
  }

  .debug-copy {
    margin-top: 0.5rem;
    font-size: 0.75em;
    padding: 0.25rem 0.5rem;
    background: linear-gradient(to right, #f59e0b, #d97706);
    color: white;
    border: none;
    border-radius: 0.25rem;
    cursor: pointer;
    font-family: Baskerville, serif;
    transition: all 0.2s;
  }

  .debug-copy:hover {
    background: linear-gradient(to right, #d97706, #b45309);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }

  .debug-copy:active {
    transform: translateY(1px);
  }

  /* Expand/collapse styles */
  .debug-value-container {
    position: relative;
  }

  .debug-value.debug-collapsed {
    max-height: 100px;
    overflow: hidden;
    position: relative;
  }

  .debug-value.debug-collapsed::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 30px;
    background: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.05));
  }

  .debug-value.debug-expanded {
    max-height: none;
  }


  /* Type badges */
  .debug-type-badge {
    display: inline-block;
    font-size: 0.7em;
    padding: 0.15rem 0.4rem;
    background: rgba(217, 119, 6, 0.15);
    color: #92400e;
    border-radius: 0.25rem;
    margin-left: 0.5rem;
    font-weight: normal;
    font-family: 'Monaco', 'Courier New', monospace;
  }

  /* JSON syntax highlighting */
  .json-key {
    color: #92400e;
    font-weight: 600;
  }

  .json-string {
    color: #d97706;
  }

  .json-number {
    color: #ea580c;
  }

  .json-boolean {
    color: #b91c1c;
    font-weight: 600;
  }

  .json-null {
    color: #78716c;
    font-style: italic;
  }

  .json-punctuation {
    color: #57534e;
  }
  
  /* Choice button styling */
  .choice-button {
    @apply w-full text-left p-4 rounded transition-all duration-300 border flex items-center justify-between relative overflow-hidden;
    font-family: Baskerville, serif;
    box-shadow: 1px 1px 4px rgba(0,0,0,0.05);
  }
  
  .choice-button:not(:disabled) {
    @apply bg-gradient-to-r from-amber-100/40 to-yellow-100/40 hover:from-amber-100/60 hover:to-yellow-100/60 text-amber-900 border-amber-600/20 hover:border-amber-600/30 cursor-pointer;
  }
  
  .choice-button:disabled {
    @apply bg-gray-100/20 text-gray-400 border-gray-300/20 cursor-not-allowed;
    box-shadow: none;
  }
  
  .choice-shimmer {
    @apply absolute inset-0 bg-gradient-to-r from-transparent via-amber-200/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700;
  }
  
  /* Name input modal */
  .modal-overlay {
    @apply fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50;
  }
  
  .modal-container {
    @apply relative max-w-md mx-4;
  }
  
  .modal-border-outer {
    @apply absolute -inset-4 border-2 border-amber-700/20 rounded-lg;
  }
  
  .modal-border-inner {
    @apply absolute -inset-2 border border-amber-600/20 rounded-lg;
  }
  
  .modal-content {
    @apply relative bg-gradient-to-br from-amber-50 via-yellow-50 to-amber-50 rounded-lg p-8 shadow-2xl border border-amber-600/30;
  }
  
  .modal-header {
    @apply text-center mb-6;
  }
  
  .modal-icon {
    @apply mb-4 relative inline-block w-16 h-16 text-amber-700;
  }
  
  .modal-title {
    @apply text-3xl font-serif text-amber-900 mb-3;
    font-family: Baskerville, 'Palatino Linotype', serif;
    letter-spacing: 0.05em;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
  }
  
  .modal-subtitle {
    @apply text-amber-700/90 leading-relaxed;
    font-family: Baskerville, serif;
  }
  
  .name-input {
    @apply w-full p-3 bg-white/70 border border-amber-600/30 rounded text-amber-900 placeholder-amber-600/40 focus:outline-none focus:border-amber-600/50;
    font-family: Baskerville, serif;
    letter-spacing: 0.02em;
    box-shadow: 0 0 10px rgba(217,119,6,0.1);
  }
  
  .name-input:focus {
    box-shadow: 0 0 10px rgba(217,119,6,0.1);
  }
  
  .submit-button {
    @apply w-full bg-gradient-to-r from-amber-700 via-amber-600 to-amber-700 text-amber-50 py-3 px-4 rounded transition-all font-semibold border border-amber-700/50;
    font-family: Baskerville, serif;
    letter-spacing: 0.05em;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
  }
  
  .submit-button:hover {
    @apply from-amber-600 to-amber-600 shadow-lg;
  }
  
  /* Page corners */
  .page-corner {
    @apply absolute w-12 h-12 border-amber-700/20;
  }
  
  .page-corner-tl {
    @apply -top-3 -left-3 border-t-2 border-l-2 rounded-tl-lg;
  }
  
  .page-corner-tr {
    @apply -top-3 -right-3 border-t-2 border-r-2 rounded-tr-lg;
  }
  
  .page-corner-bl {
    @apply -bottom-3 -left-3 border-b-2 border-l-2 rounded-bl-lg;
  }
  
  .page-corner-br {
    @apply -bottom-3 -right-3 border-b-2 border-r-2 rounded-br-lg;
  }
  
  /* Separators and decorative elements */
  .decorative-separator {
    @apply flex items-center justify-center my-6;
  }
  
  .separator-line {
    @apply h-px bg-gradient-to-r from-transparent via-amber-700/20 to-transparent w-full;
  }
  
  .separator-symbol {
    @apply text-amber-600/50 mx-4 text-xl;
  }
  
  .choice-prompt {
    @apply text-amber-800/80 text-center mb-4 italic text-lg;
    font-family: Baskerville, serif;
    letter-spacing: 0.02em;
  }
  
  /* Home button */
  .home-button {
    @apply w-full text-center p-4 bg-gradient-to-r from-amber-50/40 to-yellow-50/40 hover:from-amber-100/50 hover:to-yellow-100/50 text-amber-800 rounded transition-all duration-300 border border-amber-600/15 hover:border-amber-600/25 flex items-center justify-center gap-2 relative overflow-hidden;
    box-shadow: 1px 1px 3px rgba(0,0,0,0.03);
    font-family: Baskerville, serif;
  }
  
  .home-button-icon {
    @apply w-4 h-4 text-amber-700;
  }
  
  .home-button-text {
    @apply font-medium relative z-10;
    letter-spacing: 0.02em;
  }
  
  .home-button-shimmer {
    @apply absolute inset-0 bg-gradient-to-r from-transparent via-amber-200/15 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700;
  }
  
  /* Footer */
  .primer-footer {
    @apply text-center text-amber-700/70 text-sm mt-8 mb-4;
  }
  
  .footer-decoration {
    @apply flex items-center justify-center mb-2;
  }
  
  .footer-flourish {
    @apply text-xl;
  }
  
  .footer-line {
    @apply h-px bg-gradient-to-r from-transparent via-amber-700/30 to-transparent w-20 mx-2;
  }
  
  .footer-text {
    @apply mb-2;
    font-family: Baskerville, serif;
    letter-spacing: 0.05em;
  }
  
  .footer-stats {
    @apply flex items-center justify-center space-x-4;
  }
  
  .footer-stat {
    font-family: Baskerville, serif;
  }

  /* === DARK MODE STYLES === */

  /* Dark mode body background */
  .dark-mode ~ body,
  .dark-mode {
    background: linear-gradient(180deg, #1a1612 0%, #2d2419 50%, #1f1b15 100%);
  }

  /* Dark mode container */
  .dark-mode .primer-container::before {
    background-image: repeating-linear-gradient(
      90deg,
      transparent,
      transparent 2px,
      rgba(217, 119, 6, 0.08) 2px,
      rgba(217, 119, 6, 0.08) 4px
    );
  }

  /* Dark mode header */
  .dark-mode .title-line-1,
  .dark-mode .title-line-2 {
    color: #fbbf24;
    text-shadow: 2px 2px 6px rgba(251, 191, 36, 0.3);
  }

  .dark-mode .subtitle {
    color: #d97706;
  }

  .dark-mode .decorative-line {
    background: linear-gradient(to right, transparent, #d97706, transparent);
  }

  /* Dark mode manuscript page */
  .dark-mode .manuscript-page {
    background: linear-gradient(to bottom right, #2d2419, #392e20, #2d2419);
    border-color: rgba(217, 119, 6, 0.3);
    box-shadow: inset 0 0 20px rgba(217, 119, 6, 0.1), 0 10px 40px rgba(0,0,0,0.5);
  }

  /* Dark mode typography */
  .dark-mode .primer-title {
    color: #fbbf24;
    text-shadow: 2px 2px 6px rgba(251, 191, 36, 0.3);
  }

  .dark-mode .illuminated-letter {
    color: #fbbf24;
    text-shadow: 2px 2px 4px rgba(251, 191, 36, 0.4);
  }

  .dark-mode .story-text {
    color: #e5d5c1;
  }

  /* Dark mode settings panels */
  .dark-mode .p-4.border.border-amber-200 {
    background: rgba(45, 36, 25, 0.5);
    border-color: rgba(217, 119, 6, 0.3);
  }

  .dark-mode .p-4.border.border-amber-200 strong {
    color: #fbbf24;
  }

  .dark-mode .p-4.border.border-amber-200 span {
    color: #d97706;
  }

  /* Dark mode choice buttons */
  .dark-mode .choice-button:not(:disabled) {
    background: linear-gradient(to right, rgba(45, 36, 25, 0.6), rgba(57, 46, 32, 0.6));
    color: #fbbf24;
    border-color: rgba(217, 119, 6, 0.3);
  }

  .dark-mode .choice-button:not(:disabled):hover {
    background: linear-gradient(to right, rgba(57, 46, 32, 0.8), rgba(69, 56, 42, 0.8));
    border-color: rgba(217, 119, 6, 0.5);
  }

  /* Dark mode separators */
  .dark-mode .separator-line {
    background: linear-gradient(to right, transparent, rgba(217, 119, 6, 0.3), transparent);
  }

  .dark-mode .separator-symbol {
    color: rgba(217, 119, 6, 0.7);
  }

  .dark-mode .choice-prompt {
    color: #d97706;
  }

  /* Dark mode home button */
  .dark-mode .home-button {
    background: linear-gradient(to right, rgba(45, 36, 25, 0.5), rgba(57, 46, 32, 0.5));
    color: #fbbf24;
    border-color: rgba(217, 119, 6, 0.25);
  }

  .dark-mode .home-button:hover {
    background: linear-gradient(to right, rgba(57, 46, 32, 0.7), rgba(69, 56, 42, 0.7));
    border-color: rgba(217, 119, 6, 0.4);
  }

  .dark-mode .home-button-icon {
    color: #d97706;
  }

  /* Dark mode footer */
  .dark-mode .primer-footer {
    color: rgba(217, 119, 6, 0.7);
  }

  .dark-mode .footer-line {
    background: linear-gradient(to right, transparent, rgba(217, 119, 6, 0.4), transparent);
  }

  /* Dark mode page corners */
  .dark-mode .page-corner {
    border-color: rgba(217, 119, 6, 0.3);
  }

  /* Dark mode modal */
  .dark-mode .modal-content {
    background: linear-gradient(to bottom right, #2d2419, #392e20, #2d2419);
    border-color: rgba(217, 119, 6, 0.4);
  }

  .dark-mode .modal-title {
    color: #fbbf24;
    text-shadow: 2px 2px 4px rgba(251, 191, 36, 0.3);
  }

  .dark-mode .modal-subtitle {
    color: #d97706;
  }

  .dark-mode .modal-border-outer {
    border-color: rgba(217, 119, 6, 0.3);
  }

  .dark-mode .modal-border-inner {
    border-color: rgba(217, 119, 6, 0.2);
  }

  /* Dark mode inputs */
  .dark-mode .name-input {
    background: rgba(0, 0, 0, 0.3);
    border-color: rgba(217, 119, 6, 0.4);
    color: #fbbf24;
  }

  .dark-mode .name-input::placeholder {
    color: rgba(217, 119, 6, 0.5);
  }

  .dark-mode .name-input:focus {
    border-color: rgba(217, 119, 6, 0.6);
  }
}